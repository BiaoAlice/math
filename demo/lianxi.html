<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>数学网</title>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="./css/lianxi.css">
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/jq.js"></script>
    <script type="text/javascript" src="js/quiz.js"></script>

</head>
<body>
   <div>
       <div class="header">
           <div class="header_co">
            <!-- 左 -->
           <span class="he_lf"><a href="./index.html"></a>数学网<b>-寻找热爱学习的你</b></span>
           <!-- 右 -->
           <div class="he_ri">
               <span><a href="./personal.html">个人中心</a></span>
               <span><a href="./about.html">关于我们</a></span>
           </div>
           </div>
       </div>
       <!-- 导航 -->
       <div class="nav">
           <div class="nav_co">
                <div class="logo">
                    <img src="./images/logo.jpg" alt="">
                </div>
                <div class="search-input">
                    <input type="search" placeholder="搜索资料">
                    <button>搜索</button>
                </div>
                <div class="gongneng">
                    <div class="gongnenglf">
                         <span class="ziyuan"><a href="./index.html">资源导航</a></span>
                    </div> 
                    <!-- 功能栏 -->  
                         <div class="gongnengri">
                            <span class="jichulianxi"><a href="./lianxi.html">基础练习</a></span>
                            <span class="banjizuoye"><a href="./zuoye.html">班级作业</a></span>
                            <span class="monishijuan"><a href="./shijuan.html">模拟试卷</a></span>
                            <span><a href="./tongzhi.html">班级通知</a></span>
                        </div>
                </div>
           </div>
       </div>
       <!-- 基础练习 -->
       <div class="lianxi">
            <p>年级：<span class="grade"></span></p>
            <p class="sc">上册：
            </p>
            <p class="xc">下册：
            </p>
            <!-- 内容区 -->
            <div class="content">
                <div>
                    <div class="content-box">
                        <div class="content-dev"></div>
                        <div class="choose">
                            <input type="radio" value="soEasy" name="optionsRadios" checked>简单
                            <input type="radio" value="easy" name="optionsRadios">一般
                            <input type="radio" value="diff" name="optionsRadios">困难
                        </div>
                        <div class="btn-box">

                        </div>
                    </div>
                </div>
                <div class="demo">
                    <div id='quiz-container'></div>
                </div>
            </div>
       </div>
        <div class="friendlink">
            <div class="friend"><span>友情链接</span></div>
            <div class="lj">
                <span><a href="http://zxxk.com">学科网</a></span>
                <span><a href="http://http://zujuan.xkw.com/">组卷网</a></span>
                <span><a href="http://">教育网</a></span>
                <span><a href="http://">中小学教育网</a></span>
                <span><a href="http://">广西招生办</a></span>
                <span><a href="http://www.baidu.com">百度一下</a></span>
            </div>
        </div>
        <div class="banquan">
            <p>地址：中国广西桂林市雁山区雁山镇雁中路3号 邮编:541006<br />
                版权所有：李俊生
            </p>
         </div> 
   </div>
   <script type="text/javascript">
    $(function(){
        let content1 = '第一章';
        let content2 = '第二章';
        let content3 = '第三章';
        let grade = localStorage.getItem('grade'),
            grade1 ='';
            switch(grade){
                case 'one':
                    grade1 = "一年级";
                    break;
                case 'two':
                    grade1 = "二年级";
                    break;
                case 'three':
                    grade1 = "三年级";
                    break;
                case 'four':
                    grade1 = "四年级";
                    break;
                case 'five':
                    grade1 = "五年级";
                    break;
                default:
                    grade1 = "六年级";
            }
        $('.grade').text(grade1);
    $('.btn').on('click',function(){
        window.location.href="./lianxi.html";
    })
  
    let str1 = '';
    $.ajax({
        url:'../user.php',
        type:"POST",
        data:{
            type:"volume"
        },
        success(res){
            let json = JSON.parse(res);
            json.data.forEach(item=>{
                str1 += `<label style="margin-right:20px" for="">${item.name}</label>`;
            })
           
           $('.sc').html($('.sc').html()+str1);
           $('.sc label').eq(0).on('click',function(){
                $(this).css("color","red");
                $('.sc label').eq(1).css("color","black");
                $('.xc label').eq(0).css("color","black");
                $('.content-box').css("display","block");
                $('#quiz-container').css("display","none");
                $('#content-dev').html(content1);
                $('.btn-box').html('<button class="first">开始</button>');
                $('.first').on('click',function(){
                    let val = $("input[type='radio']:checked").val(); 
                    $('.content-box').css("display","none");
                    $('#quiz-container').css("display","block");
                    $.ajax({
                        url:'../user.php',
                        type:"POST",
                        data:{
                            type:"base",
                            db :`chaptera${val}` 
                        },
                        success(res){
                            let list = JSON.parse(res).data;
                            let questions = [];
                            list.forEach(item => {
                            if(item.opationC == ''){
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB],
                                'correctAnswer':item.answer
                                })
                            }else{
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB,item.opationC,item.opationD],
                                'correctAnswer':item.answer
                                })
                            } 
                        });
                        var init={'questions':questions};
                            $('#quiz-container').jquizzy({
                                questions: init.questions
                            });
                                }
                            })
               })
            })
            $('.sc label').eq(1).on('click',function(){
                $(this).css("color","red");
                $('.sc label').eq(0).css("color","black");
                $('.xc label').eq(0).css("color","black");
                $('#quiz-container').css("display","none");
                $('.content-box').css("display","block");
                $('.btn-box').html('<button class="second">开始</button>');                
                $('.second').on('click',function(){
                    let val = $("input[type='radio']:checked").val();
                    $('.content-box').css("display","none");
                    $('#quiz-container').css("display","block");
                    $.ajax({
                        url:'../user.php',
                        type:"POST",
                        data:{
                            type:"base",
                            db :`chapterb${val}` 
                        },
                        success(res){
                            let list = JSON.parse(res).data;
                            let questions = [];
                            list.forEach(item => {
                            console.log(item.opationC)
                            if(item.opationC == ''){
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB],
                                'correctAnswer':item.answer
                                })
                            }else{
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB,item.opationC,item.opationD],
                                'correctAnswer':item.answer
                                })
                            } 
                        });
                        var init={'questions':questions};
                            $('#quiz-container').jquizzy({
                                questions: init.questions
                            });
                        }
                    })
                    
               })
            })
        }
    })
    let str2 = ''
    $.ajax({
        url:'../user.php',
        type:"POST",
        data:{
            type:"lastvolume"
        },
        success(res){
            let json = JSON.parse(res);
            json.data.forEach(item=>{
                str2 += `<label style="margin-right:20px" for="">${item.name}</label>`;
            })
            
           $('.xc').html($('.xc').html()+str2);
           $('.xc label').eq(0).on('click',function(){
            $(this).css("color","red");
                $(this).css("color","red");
                $('.sc label').eq(1).css("color","black");
                $('.sc label').eq(0).css("color","black");
                $('#quiz-container').css("display","none");
                $('.content-box').css("display","block");
                $('.btn-box').html('<button class="third">开始</button>');                
                $('.third').on('click',function(){
                    let val = $("input[type='radio']:checked").val();
                    $('.content-box').css("display","none");
                    $('#quiz-container').css("display","block");
                    $.ajax({
                        url:'../user.php',
                        type:"POST",
                        data:{
                            type:"base",
                            db :`chapterc${val}` 
                        },
                        success(res){
                            let list = JSON.parse(res).data;
                            let questions = [];
                            list.forEach(item => {
                            if(item.opationC == ''){
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB],
                                'correctAnswer':item.answer
                                })
                            }else{
                                questions.push({
                                'question':item.selectName,
                                'answers':[item.opationA,item.opationB,item.opationC,item.opationD],
                                'correctAnswer':item.answer
                                })
                            } 
                        });
                        var init={'questions':questions};
                            $('#quiz-container').jquizzy({
                                questions: init.questions
                            });
                        }
                    })
                    
               })
           })
        }
    })
    
})    
</script>
</body>
</html>